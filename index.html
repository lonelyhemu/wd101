<script>
  const form = document.getElementById("registrationForm");
  const tableBody = document.querySelector("#userTable tbody");

  // Load entries from localStorage on page load
  window.onload = () => {
    const storedEntries = localStorage.getItem("userEntries");
    const entries = storedEntries ? JSON.parse(storedEntries) : [];
    entries.forEach(addRow);
  };

  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const entry = {
      name: document.getElementById("name").value,
      email: document.getElementById("email").value,
      password: document.getElementById("password").value,
      dob: document.getElementById("dob").value,
      acceptedTerms: document.getElementById("acceptTerms").checked
    };

    // Age validation
    const dobDate = new Date(entry.dob);
    const today = new Date();
    let age = today.getFullYear() - dobDate.getFullYear();
    const m = today.getMonth() - dobDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < dobDate.getDate())) {
      age--;
    }
    if (age < 18 || age > 55) {
      alert("Age must be between 18 and 55.");
      return;
    }

    // Save to localStorage
    const storedEntries = localStorage.getItem("userEntries");
    const entries = storedEntries ? JSON.parse(storedEntries) : [];
    entries.push(entry);
    localStorage.setItem("userEntries", JSON.stringify(entries));

    addRow(entry);
    form.reset();
  });

  // Add row to the table
  function addRow(entry) {
    const row = tableBody.insertRow();
    row.innerHTML = `
      <td>${entry.name}</td>
      <td>${entry.email}</td>
      <td>${entry.password}</td>
      <td>${entry.dob}</td>
      <td>${entry.acceptedTerms}</td>
    `;
  }
</script>
